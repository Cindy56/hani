<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.game.hall.modules.order.dao.LotteryOrderDao">


<select resultType="LotteryOrder" id="findList2">
	SELECT * FROM (SELECT #a.id AS "id", a.order_no AS "orderNo", a.user_name AS "user.name", # a.user_id AS "user.id", a.org_id AS "orgId", a.lottery_code AS "lotteryCode", a.bet_issue_no AS "betIssueNo", # a.account_id AS "accountId", a.bet_type AS "betType", a.bet_detail AS "betDetail", a.bet_num AS "betNum", a.bet_amount AS "betAmount", a.bet_rate AS "betRate", a.play_mode_money AS "playModeMoney", a.play_mode_commission_rate AS "playModeCommissionRate", a.play_mode_money_type AS "playModeMoneyType", a.order_source AS "orderSource", a.order_type AS "orderType", a.schema_id AS "schemaId", a.win_amount AS "winAmount", a.withdraw_amount AS "withdrawAmount", a.status AS "status", a.create_date AS "createDate", a.create_by AS "createBy.id", a.update_date AS "updateDate", a.update_by AS "updateBy.id", a.del_flag AS "delFlag" FROM lottery_order a WHERE a.del_flag = 0 
	<if test="orderNo != null and orderNo != ''"> AND a.order_no = #{orderNo} </if>
	
	<if test="user != null and user.id != null and user.id != ''"> AND a.user_id = #{user.id} </if>
	
	<if test="lotteryCode != null and lotteryCode != ''"> AND a.lottery_code = #{lotteryCode} </if>
	
	<if test="betIssueNo != null and betIssueNo != ''"> AND a.bet_issue_no = #{betIssueNo} </if>
	
	<if test="betType != null and betType != ''"> AND a.bet_type = #{betType} </if>
	
	<if test="playModeMoneyType != null and playModeMoneyType != ''"> AND a.play_mode_money_type = #{playModeMoneyType} </if>
	
	<if test="orderSource != null and orderSource != ''"> AND a.order_source = #{orderSource} </if>
	
	<if test="orderType != null and orderType != ''"> AND a.order_type = #{orderType} </if>
	
	<if test="status != null and status != ''"> AND a.status = #{status} </if>
	
	<if test="createDate != null and createDate != ''"> AND a.create_date = #{createDate} </if>
	) AS c LEFT JOIN (SELECT id, `name` AS "orgName" FROM `game`.`sys_office`) AS b ON c.`orgId` = b.id 
</select>
</mapper>